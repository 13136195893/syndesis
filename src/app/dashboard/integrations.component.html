<ipaas-loading [loading]="loading">
  <div class="container-cards-pf ipaas-dashboard-integrations">

    <!-- First Row: Page Header & Toolbar -->

    <div class="row row-cards-pf first-row">
      <div class="page-header">
        <div class="actions pull-right">
          <a href="#" [routerLink]="['/integrations']">View All Integrations</a>&nbsp;&nbsp;
          <button class="btn btn-primary" [routerLink]="['/integrations/create']">Create Integration</button>
        </div>
        <h1>Dashboard: Integrations</h1>
      </div>
    </div>


    <!-- Second Row -->

    <div class="row row-cards-pf second-row">

      <!-- Left: Integrations -->

      <div class="col-xs-7 top-integrations">
        <div class="card-pf">
          <div class="card-pf-heading">
            <p class="card-pf-heading-details">Last 30 days</p>

            <h2 class="card-pf-title">
              Top 5 Integrations
            </h2>
          </div>
          <div class="card-pf-body">
            <div class="row integration"
                 *ngFor="let integration of integrations"
                 (click)="onSelect(integration)">

              <!-- Icons -->

              <div class="col-xs-3 icons">
                <div class="list-view-pf-left">
                  <span [class]="'fa ' + getStartIcon(integration) + ' list-view-pf-icon-sm'"></span>
                  <span class="fa fa-angle-right"></span>
                  <span [class]="'fa ' + getFinishIcon(integration) + ' list-view-pf-icon-sm'"></span>
                </div>
              </div>

              <!-- Name -->

              <div class="col-xs-4 name">
                <!--
                <a href="" [routerLink]="['/integrations', integration.id]">
                  {{ integration.name }}
                </a>
                -->
                {{ integration.name }}
              </div>

              <!-- Times of Use -->

              <div class="col-xs-3 times-of-use">
                <p>18 Times of Use</p>
              </div>

              <!-- Status -->

              <div class="col-xs-1 status">
                <i class="pficon pficon-ok"></i>
              </div>


              <!-- Actions -->
              <div class="col-xs-1 actions">
                <div class="dropdown pull-right dropdown-kebab-pf">
                  <button class="btn btn-link dropdown-toggle"
                          type="button"
                          id="dropdownKebabRight9"
                          data-toggle="dropdown"
                          aria-haspopup="true"
                          aria-expanded="true">
                    <span class="fa fa-ellipsis-v"></span>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-right"
                      aria-labelledby="dropdownKebabRight9">
                    <li>
                      <a [routerLink]=" ['/integrations/edit', integration.id, 'save-or-add-step'] ">Edit</a>
                    </li>
                    <li>
                      <a (click)="requestDeactivate(integration)">Deactivate</a>
                    </li>
                    <li *ngIf="integration.active === false"
                        (click)="requestActivate(integration)">
                      <a>Activate</a>
                    </li>
                    <!--
                    <li>
                      <a>Duplicate</a>
                    </li>
                    -->
                    <li>
                      <a (click)="requestDelete(integration)">Delete</a>
                    </li>
                  </ul>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>


      <!-- Right -->

      <div class="col-xs-5">

        <!-- Right: Integration Board -->

        <div class="card-pf integration-board">
          <div class="card-pf-heading">
            <h2 class="card-pf-title">
              Integration Board
            </h2>
          </div>
          <div class="card-pf-body">
            <p>Nullam quis risus eget urna mollis ornare vel eu leo. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
          </div>
        </div>

        <!-- Right: Recent Updates -->

        <div class="card-pf recent-updates">
          <div class="card-pf-heading">
            <h2 class="card-pf-title">
              Recent Updates
            </h2>
          </div>
          <div class="card-pf-body">
            <div class="row update"
                 *ngFor="let integration of integrations">
              <div class="col-xs-6">
                <a>Update client service</a>
              </div>
              <div class="col-xs-2">
                <span class="label label-default">Draft</span>
              </div>
              <div class="col-xs-4">11 Oct 22:00</div>
            </div>
          </div>
        </div>
      </div>

    </div>


    <!-- Third Row: Connections Header & Toolbar -->

    <div class="row row-cards-pf third-row">
      <div class="page-header">
        <div class="actions pull-right">
          <a href="#" [routerLink]="['/connections']">View All Connections</a>&nbsp;&nbsp;
          <button class="btn btn-primary" [routerLink]="['/connections/create']">Create Connection</button>
        </div>
        <h1>Dashboard: Connections</h1>
      </div>
    </div>


    <!-- Fourth Row: Connections -->

    <div class="row row-cards-pf fourth-row">

      <ipaas-dashboard-connections [connections]="connections | async"></ipaas-dashboard-connections>

    </div>
  </div>
</ipaas-loading>
